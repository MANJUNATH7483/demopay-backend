<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pay</title>
    <style>
        body { font-family: 'Roboto', sans-serif; margin: 0; padding: 0; background-color: #f5f5f5; }
        
        /* Header */
        .header { display: flex; align-items: center; padding: 15px; background: white; border-bottom: 1px solid #eee; }
        .back-btn { font-size: 24px; text-decoration: none; color: black; margin-right: 20px; }
        .title { font-size: 20px; font-weight: 500; flex-grow: 1; }
        .help-icon { font-size: 20px; color: #555; border: 1px solid #555; border-radius: 50%; width: 20px; height: 20px; text-align: center; line-height: 20px; }

        /* Main Card */
        .pay-card { margin: 20px; background: white; padding: 20px; border-radius: 12px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
        
        /* Profile Section */
        .profile-section { display: flex; align-items: center; margin-bottom: 20px; }
        .avatar { 
            width: 50px; height: 50px; 
            background-color: #eab308; /* Yellow/Gold color */
            color: white; 
            border-radius: 50%; 
            display: flex; align-items: center; justify-content: center; 
            font-size: 20px; font-weight: bold;
            margin-right: 15px;
        }
        .user-details h3 { margin: 0; font-size: 16px; color: #000; }
        .user-details p { margin: 2px 0 0; font-size: 12px; color: #666; }
        .verified { color: green; font-size: 12px; margin-left: 5px; }

        /* Input Fields */
        .amount-box { 
            border: 2px solid #7c3aed; /* Purple border */
            border-radius: 8px; 
            padding: 10px 15px; 
            display: flex; align-items: center; 
            margin-bottom: 15px; 
            background: #fdfeff;
        }
        .currency { font-size: 24px; font-weight: bold; color: #333; margin-right: 10px; }
        .amount-input { 
            border: none; outline: none; font-size: 24px; font-weight: bold; width: 100%; color: #333; background: transparent;
        }
        
        .message-box { 
            border: 1px solid #ddd; 
            border-radius: 8px; 
            padding: 12px; 
        }
        .message-input { border: none; outline: none; width: 100%; font-size: 14px; }

        /* Footer Button */
        .footer { position: fixed; bottom: 0; width: 100%; background: white; padding: 15px; box-shadow: 0 -2px 10px rgba(0,0,0,0.05); box-sizing: border-box; }
        .pay-btn {
            background-color: #d1d5db; /* Grey initially */
            color: white; 
            width: 100%; 
            padding: 15px; 
            border: none; 
            border-radius: 25px; 
            font-size: 16px; 
            font-weight: bold;
            text-align: center;
            cursor: pointer;
        }
        .pay-btn.active { background-color: #2563eb; } /* Blue when active */
    </style>
</head>
<body>

    <div class="header">
        <a href="Home Screen.html" class="back-btn">‚Üê</a>
        <div class="title">Pay</div>
        <div class="help-icon">?</div>
    </div>

    <div class="pay-card">
        <div class="profile-section">
            <div class="avatar" id="avatar-circle">U</div>
            <div class="user-details">
                <h3 id="recipient-name">Loading...</h3>
                <p id="banking-name">Banking name: <span id="upi-id">...</span> <span class="verified">‚úî</span></p>
            </div>
        </div>

        <div class="amount-box">
            <span class="currency">‚Çπ</span>
            <input type="number" id="amount" class="amount-input" placeholder="Enter amount">
        </div>

        <div class="message-box">
            <input type="text" class="message-input" placeholder="Add a message (optional)">
        </div>
    </div>

    <div class="footer">
        <button class="pay-btn" id="pay-btn" onclick="processPayment()">Proceed To Pay</button>
    </div>

    <script>
        // 1. Get Data from URL (sent by the Scanner or Mobile Input)
        const urlParams = new URLSearchParams(window.location.search);
        const name = urlParams.get('name') || "Merchant";
        const mobile = urlParams.get('mobile') || "9876543210@upi";

        // 2. Update the Screen Text
        document.getElementById('recipient-name').innerText = name;
        document.getElementById('upi-id').innerText = mobile;

        // 3. Update the Profile Circle (Initials)
        const initials = name.substring(0, 2).toUpperCase();
        document.getElementById('avatar-circle').innerText = initials;

        // 4. Handle Payment Logic
        const amountInput = document.getElementById('amount');
        const payBtn = document.getElementById('pay-btn');

        // Turn button blue when typing
        amountInput.addEventListener('input', function() {
            if(this.value.length > 0) {
                payBtn.classList.add('active');
                payBtn.style.backgroundColor = "#2563eb"; // Blue
            } else {
                payBtn.classList.remove('active');
                payBtn.style.backgroundColor = "#d1d5db"; // Grey
            }
        });

        function processPayment() {
            const amount = document.getElementById('amount').value;
            if(!amount) return;
            
            // üöÄ FIXED: Redirects to Success Screen instead of Bank Details
            window.location.href = `success.html?amount=${amount}&name=${encodeURIComponent(name)}`;
        }
    </script>

</body>
</html>
