<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Payment Successful</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <style>
    html,body{ margin:0; height:100dvh; font-family:'Segoe UI',sans-serif; overflow:hidden; background:#00b661; }
    #greenScreen{ height:100%; width:100%; display:flex; flex-direction:column; justify-content:space-between; color:white; }
    .content-wrapper{ flex:1; display:flex; flex-direction:column; align-items:center; justify-content:center; text-align:center; padding-bottom:50px; }
    .icon-container{ width:70px; height:70px; background:white; border-radius:50%; display:flex; align-items:center; justify-content:center; margin-bottom:20px; animation:popIn 0.4s cubic-bezier(0.175,0.885,0.32,1.275); }
    @keyframes popIn{0%{transform:scale(0);}100%{transform:scale(1);}}
    .check-icon{ color:#00b661; font-size:35px; }
    .amount-text{ font-size:40px; font-weight:bold; margin:5px 0 10px; }
    .bottom-actions{ width:100%; padding:20px 0 30px; display:flex; justify-content:space-around; align-items:center; }
    .action-btn{ display:flex; flex-direction:column; align-items:center; gap:8px; color:white; font-size:12px; cursor:pointer; background:none; border:none; width:80px; }
    .action-icon{ width:45px; height:45px; border:1px solid rgba(255,255,255,0.6); border-radius:50%; display:flex; align-items:center; justify-content:center; font-size:20px; background:rgba(255,255,255,0.1); }
    
    #receiptScreen{ display:none; background:#f1f3f6; height:100%; width:100%; flex-direction:column; }
    .receipt-header{ background:#00b661; color:white; padding:15px; display:flex; align-items:center; gap:10px; }
    .receipt-card{ background:white; margin:15px; padding:20px; border-radius:8px; box-shadow:0 1px 3px rgba(0,0,0,0.1); }
    .detail-row{ display:flex; justify-content:space-between; padding:12px 0; border-bottom:1px solid #f9f9f9; font-size:13px; color:#333; }
  </style>
</head>
<body>
  <div id="greenScreen">
    <div class="content-wrapper">
        <div class="icon-container"><i class="fa-solid fa-check check-icon"></i></div>
        <div style="font-size:16px; font-weight:500;">Payment Successful</div>
        <div class="amount-text" id="amtDisplay">₹0</div>
        <div style="font-size:14px; opacity:0.9;">Paid to <span id="nameDisplay" style="font-weight:bold;">User</span></div>
    </div>
    <div class="bottom-actions">
        <div class="action-btn" onclick="checkBalance()"><div class="action-icon"><i class="fa-solid fa-building-columns"></i></div>Check Balance</div>
        <div class="action-btn" onclick="showReceipt()"><div class="action-icon"><i class="fa-solid fa-list-ul"></i></div>View Details</div>
        <div class="action-btn" onclick="goHome()"><div class="action-icon" style="background:white; color:#00b661; border:none;"><i class="fa-solid fa-check"></i></div>Done</div>
    </div>
  </div>

  <div id="receiptScreen">
      <div class="receipt-header"><i class="fa-solid fa-arrow-left" onclick="hideReceipt()"></i><div><h4 style="margin:0;">Transaction Successful</h4><span style="font-size:11px; opacity:0.8;" id="receiptTime">...</span></div></div>
      <div class="receipt-card">
          <div style="font-size:12px; color:#666; margin-bottom:5px;">Paid to</div>
          <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px;">
             <div style="display:flex; align-items:center; gap:10px;"><div style="width:40px; height:40px; background:#ddd; border-radius:50%; display:flex; align-items:center; justify-content:center; font-weight:bold;" id="rAvatar">U</div><h3 style="margin:0;" id="rName">User</h3></div>
             <h2 style="margin:0;" id="rAmount">₹0</h2>
          </div>
          <hr style="border:none; border-top:1px dashed #ddd; margin-bottom:15px;">
          <div class="detail-row"><span style="color:#888;">Transaction ID</span><span style="font-weight:500;" id="txnId">T123...</span></div>
          <div class="detail-row" style="border:none;"><span style="color:#888;">Debited from</span><span style="font-weight:500;" id="debitBank">SBI - 8829</span></div>
      </div>
  </div>

  <script>
    const urlParams = new URLSearchParams(window.location.search);
    const amount = urlParams.get('amt') || '0';
    const name = urlParams.get('name') || 'Unknown';
    // FIXED: Get the bank used (Default to SBI if missing)
    const bankUsed = urlParams.get('bank') || 'SBI';

    // Formatting for Indian Currency
    const fmtAmt = parseFloat(amount).toLocaleString('en-IN', { style: 'currency', currency: 'INR' });

    document.getElementById('amtDisplay').innerText = fmtAmt; 
    document.getElementById('nameDisplay').innerText = name;
    document.getElementById('rAmount').innerText = fmtAmt; 
    document.getElementById('rName').innerText = name; 
    document.getElementById('rAvatar').innerText = name.charAt(0);
    document.getElementById('txnId').innerText = "T" + Math.floor(Math.random()*1000000000000); 
    document.getElementById('receiptTime').innerText = new Date().toLocaleString();
    
    // Update Receipt Bank Name
    document.getElementById('debitBank').innerText = bankUsed === 'HDFC' ? "HDFC Bank - 1234" : "SBI - 8829";

    function showReceipt(){ document.getElementById('greenScreen').style.display='none'; document.getElementById('receiptScreen').style.display='flex'; }
    function hideReceipt(){ document.getElementById('receiptScreen').style.display='none'; document.getElementById('greenScreen').style.display='flex'; }
    function goHome(){ location.href="Home Screen.html"; }
    
    // FIXED: Check Balance Logic
    function checkBalance(){ 
        const storageKey = bankUsed === 'HDFC' ? "walletBalance_HDFC" : "walletBalance";
        const bal = parseFloat(localStorage.getItem(storageKey) || "0");
        const fmtBal = bal.toLocaleString('en-IN', { style: 'currency', currency: 'INR' });
        alert("Your " + bankUsed + " Balance: " + fmtBal); 
    }
  </script>
</body>
</html>